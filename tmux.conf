##### My tmux config, a work in progress

### Things I know I want! ###
  ### Main Settings ###
    ## make tmux attach make new, if not running
    new-session

    ## Maybe fix DISPLAY?
    set-option -ga update-environment ' DISPLAY'

    ## window numbing starts at 1
    set -g base-index 1

    ## Automatically set window title
    setw -g automatic-rename

    ## aggressive windows? for screen size, of different connections, on different windows
    setw -g aggressive-resize on

    ## profile colors
    # might need work...
    set -g default-terminal "screen-256color"

    ## History
    set -g history-limit 1000
  ### End Main Settings ###

  ### Key Bindings ###
    ## unbind C-z so i don't suspend and make it go to last window
    unbind C-z
    bind-key C-z last-window

    ## make C-a send C-z literally
    unbind C-a
    bind-key C-a send-prefix

    ## Change prefix key to Ctrl+z
    unbind C-b
    set -g prefix C-z

    ## join windows
    bind-key j command-prompt -p "join pane from:"  "join-pane -s '%%'"
    bind-key s command-prompt -p "send pane to:"  "join-pane -t '%%'"

    ## url grab C-z u
    bind-key u capture-pane \; save-buffer /tmp/tmux-buffer \; new-window -n "urlview" '$SHELL -c "urlview < /tmp/tmux-buffer"'

    ## reload tmux.conf
    bind R source-file ~/.tmux.conf \; display-message "Config reloaded..."

    ### More straight forward key bindings for splitting ###
    unbind %
#    bind | split-window -h
    bind h split-window -h
    unbind '"'
#    bind - split-window -v
    bind v split-window -v
    ### End splitting bindings ###

    ### Mouse On/Off ###
    ## Mouse roOn by default
    set -g mode-mouse on
    set -g mouse-resize-pane on
    set -g mouse-select-pane on
    set -g mouse-select-window on
   
    ##Toggle mouse on with ^z m
    bind m \
      set -g mode-mouse on \;\
      set -g mouse-resize-pane on \;\
      set -g mouse-select-pane on \;\
      set -g mouse-select-window on \;\
      display 'Mouse: ON'
   
    ## Toggle mouse off with ^z M
    bind M \
      set -g mode-mouse off \;\
      set -g mouse-resize-pane off \;\
      set -g mouse-select-pane off \;\
      set -g mouse-select-window off \;\
      display 'Mouse: OFF'
    ### End Mouse On/Off ###

    ### Zoom? ###
    unbind +
    bind + \
    new-window -d -n tmux-zoom 'clear && echo TMUX ZOOM && read' \;\
    swap-pane -s tmux-zoom.0 \;\
    select-window -t tmux-zoom
  
    unbind -
    bind - \
    last-window \;\
    swap-pane -s tmux-zoom.0 \;\
    kill-window -t tmux-zoom
    ### End Zoom ###

    ### vi Mode for buffer ###
    setw -g mode-keys vi
    unbind [
    bind Escape copy-mode
    unbind p
    bind p paste-buffer
    bind-key -t vi-copy 'v' begin-selection
    bind-key -t vi-copy 'y' copy-selection
    ### End vi Mode ###
  ### End Key Bindings ###

  ### Themeing Settings ###
    ## Terminal emulator window title
    set -g set-titles on
    set -g set-titles-string '#S:#I.#P #W'

    ## Notifying if other windows has activities
    setw -g monitor-activity on
    set -g visual-activity on

    ## Clock
    setw -g clock-mode-colour green
    setw -g clock-mode-style 24

    ## Inactive windows
    set-window-option -g window-status-format '#[fg=cyan,dim]#I#[fg=blue]:#[default]#W#[fg=grey,dim]#F'

    ## Highlighting the active window in status bar
#    setw -g window-status-current-bg blue
    set-window-option -g window-status-current-format '#[bg=blue,fg=cyan,bold]#I#[bg=blue,fg=cyan]:#[fg=white]#W#[fg=dim]#F'

    ### Status Bar ###
    set -g status-bg black
    set -g status-fg white
    set -g status-interval 1
    set -g status-left '#[fg=green]#H#[default]'
#    set -g status-right '#[fg=yellow]#(cut -d " " -f 1-4 /proc/loadavg)#[default] #[fg=cyan,bold]%Y-%m-%d %H:%M:%S#[default]'
    set -g status-right '#[fg=cyan,bold]%Y-%m-%d %H:%M#[default]'
    ### End Status Bar ###

    ### Message/Message Command ###
    set -g message-attr bright
    set -g message-bg cyan
    set -g message-fg white
    set -g message-command-attr bright
    set -g message-command-bg cyan
    set -g message-command-fg white 
    ### End Message ###

    ### Pane Colors ###
    set -g pane-border-fg cyan
    set -g pane-active-border-fg cyan
    ### End Pand Colors ###
  ### End Theming Settings ###
### End Things I Want ###


##### Need to figure out:
  ## Copy mode
#  unbind [
#  bind Escape copy-mode
  ## Use Vi mode
#  setw -g mode-keys vi
  ## Make mouse useful in copy mode
#  setw -g mode-mouse on


  ## Pane
#  unbind o
#  bind C-s down-pane


  ## Not usable??
  # Alerted window in status bar. Windows which have an alert (bell, activity or content).
#  set-window-option -g window-status-alert-fg red
#  set-window-option -g window-status-alert-bg white


#  ### Powerline ###  
#    ### Deconflict ###
#    set-option -g status on
#    set-option -g status-interval 2
#    set-option -g status-utf8 on
#    set-option -g status-justify "centre"
#    #set-option -g status-left-length 60
#    #set-option -g status-right-length 90
#    set-option -g status-left "#(~/git/tmux-powerline/status-left.sh)"
#    set-option -g status-right "#(~/git/tmux-powerline/status-right.sh)"
#    ### End Deconflict ###
#  
#  set -g status-left-length 52
#  set -g status-right-length 451
#  set -g status-fg white
#  set -g status-bg colour234
#  set -g window-status-activity-attr bold
#  set -g pane-border-fg colour245
#  set -g pane-active-border-fg colour39
#  set -g message-fg colour16
#  set -g message-bg colour221
#  set -g message-attr bold
#  set -g status-left '#[fg=colour235,bg=colour252,bold] ❐ #S #[fg=colour252,bg=colour238,nobold]⮀#[fg=colour245,bg=colour238,bold] #(whoami) #[fg=colour238,bg=colour234,nobold]⮀'
#  set -g window-status-format "#[fg=white,bg=colour234] #I #W "
#  set -g window-status-current-format "#[fg=colour234,bg=colour39]⮀#[fg=colour25,bg=colour39,noreverse,bold] #I ⮁ #W #[fg=colour39,bg=colour234,nobold]⮀"
#  ### End Powerline ###  